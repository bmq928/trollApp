$(document).ready(function(){var n,t,e={},o=document.getElementById("audio-control"),c=$("#play-btn"),i=$("#title"),a=$("#sound-index").children("a"),l=!1,r=[],u=1,s=(n=0,t=["pause","play"],function(){return{changeState:function(){return n=++n%t.length,t[n]},changeIcon:function(){return this.changeState(),this.getIcon()},getState:function(){return n},getIcon:function(){return 0===this.getState()?"pause":"play_arrow"},setPlay:function(){return 0===n?this.changeIcon():this.getIcon()},setPause:function(){return 1===n?this.changeIcon():this.getIcon()}}})();function h(n){$("source").attr("src",n),l&&(o.pause(),o.currentTime=0,l=!1,f("play")),o.load()}function f(n){"pause"===n?c.children("i").html(s.setPause()):"play"===n&&c.children("i").html(s.setPlay())}function g(n){var t=u-1,e=r.length;"left"===n?t=(t-1+e)%e:"right"===n&&(t=(t+1)%e),u=t+1;var o=r[t].link;console.log(o),h(o),a.html(u)}$.getJSON("./api/dir",function(n){e=n,console.log(e),$("#loader").trigger("GET_DATA"),$("#main").trigger("GET_DATA");var t,o,c=Object.keys(e)[0];i.html(c.toUpperCase()),t=n,o=$("#dropdown"),Object.keys(t).map(function(n){return'<li><a href="#!">'+n+"</a></li>"}).forEach(function(n){o.append(n)}),o.children("li").on("click",function(n){n.preventDefault();var t=$(this).children("a").html();i.html(t.toUpperCase()),r=e[t],console.log(r),u=1,a.html(u),h(r[0].link)}),r=e[c]}),o.onended=function(){f("play"),l=!1,console.log("end")},o.onplay=function(){f("pause"),l=!0,console.log("play")},o.onpause=function(){f("play"),l=!1,console.log("pause")},$("#loader").on("GET_DATA",function(){$(this).fadeOut()}),$("#main").on("GET_DATA",function(){$(this).fadeIn()}),c.on("click",function(){l?o.pause():o.play()}),$("#left-arrow").on("click",function(){g("left")}),$("#right-arrow").on("click",function(){g("right")})});